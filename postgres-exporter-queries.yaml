# Basic PostgreSQL monitoring queries
pg_database_size:
  query: "SELECT pg_database.datname, pg_database_size(pg_database.datname) as size FROM pg_database"
  master: true
  metrics:
    - datname:
        usage: "LABEL" 
        description: "Database name"
    - size:
        usage: "GAUGE"
        description: "Database size in bytes"

pg_connections:
  query: "SELECT count(*) as connections FROM pg_stat_activity"
  master: true
  metrics:
    - connections:
        usage: "GAUGE"
        description: "Total number of connections"

pg_activity:
  query: "SELECT state, count(*) as count FROM pg_stat_activity WHERE state IS NOT NULL GROUP BY state"
  master: true
  metrics:
    - state:
        usage: "LABEL"
        description: "Connection state"
    - count:
        usage: "GAUGE"
        description: "Number of connections in this state"

# Simplified partition monitoring
pg_partitions:
  query: "SELECT tablename, schemaname FROM pg_tables WHERE tablename LIKE 'tbl_users_p%'"
  master: true
  metrics:
    - tablename:
        usage: "LABEL"
        description: "Partition table name"
    - schemaname:
        usage: "LABEL"
        description: "Schema name"
